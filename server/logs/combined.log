{"code":"ECONNREFUSED","level":"error","message":"Database connection failed:","service":"xiaomi-unlock-server","stack":"AggregateError\n    at C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Database.connect (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\utils\\database.js:23:28)\n    at async startServer (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\app.js:82:9)","timestamp":"2025-08-16 22:31:24"}
{"code":"ECONNREFUSED","level":"error","message":"Database connection failed:","service":"xiaomi-unlock-server","stack":"AggregateError\n    at C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Database.connect (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\utils\\database.js:30:28)\n    at async startServer (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\app.js:82:9)","timestamp":"2025-08-16 22:32:20"}
{"level":"info","message":"Running in development mode without database connection","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:33:04"}
{"level":"info","message":"Database connected successfully","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:33:05"}
{"level":"info","message":"Xiaomi Unlock Server running on port 3000","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:33:05"}
{"level":"info","message":"Environment: development","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:33:05"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:34:14"}
{"level":"info","message":"Running in development mode without database connection","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:36:04"}
{"level":"info","message":"Database connected successfully","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:36:04"}
{"level":"info","message":"Xiaomi Unlock Server running on port 3000","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:36:04"}
{"level":"info","message":"Environment: development","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:36:04"}
{"level":"info","message":"::1 - - [16/Aug/2025:19:36:20 +0000] \"GET /health HTTP/1.1\" 200 69 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36\"","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:36:20"}
{"level":"info","message":"::1 - - [16/Aug/2025:19:36:22 +0000] \"GET /favicon.ico HTTP/1.1\" 404 30 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36\"","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:36:22"}
{"level":"info","message":"::1 - - [16/Aug/2025:19:36:31 +0000] \"GET / HTTP/1.1\" 404 30 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36\"","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:36:31"}
{"level":"info","message":"::1 - - [16/Aug/2025:19:36:38 +0000] \"GET /admin HTTP/1.1\" 404 30 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36\"","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:36:38"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:37:15"}
{"level":"info","message":"Running in development mode without database connection","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:37:50"}
{"level":"info","message":"Database connected successfully","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:37:50"}
{"level":"info","message":"Xiaomi Unlock Server running on port 3000","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:37:50"}
{"level":"info","message":"Environment: development","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:37:50"}
{"headers":{"clientId":false,"signature":false,"timestamp":false},"ip":"::1","level":"warn","message":"Missing required headers for HMAC validation","path":"/*","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:38:34"}
{"error":"Missing required authentication headers","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"xiaomi-unlock-server","stack":"Error: Missing required authentication headers\n    at createError (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\middleware\\errorHandler.js:74:19)\n    at validateHMAC (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\middleware\\hmacValidator.js:26:19)\n    at Layer.handle [as handle_request] (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:91:7)\n    at Layer.handle [as handle_request] (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:328:13)","timestamp":"2025-08-16 22:38:34","url":"/api/*","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
{"level":"info","message":"::1 - - [16/Aug/2025:19:38:34 +0000] \"GET /api/* HTTP/1.1\" 401 106 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36\"","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:38:34"}
{"level":"info","message":"::1 - - [16/Aug/2025:19:38:56 +0000] \"GET /health HTTP/1.1\" 200 69 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36\"","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:38:56"}
{"level":"info","message":"::1 - - [16/Aug/2025:19:40:28 +0000] \"GET /unlock?limit=50&offset=0 HTTP/1.1\" 404 30 \"-\" \"XiaomiUnlockClient/1.0.0\"","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:40:28"}
{"level":"info","message":"::1 - - [16/Aug/2025:19:40:47 +0000] \"POST /device/register HTTP/1.1\" 404 30 \"-\" \"XiaomiUnlockClient/1.0.0\"","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:40:47"}
{"level":"info","message":"Running in development mode without database connection","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:47:35"}
{"level":"info","message":"Database connected successfully","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:47:35"}
{"level":"info","message":"Xiaomi Unlock Server running on port 3000","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:47:35"}
{"level":"info","message":"Environment: development","service":"xiaomi-unlock-server","timestamp":"2025-08-16 22:47:35"}
{"level":"info","message":"Running in development mode without database connection","service":"xiaomi-unlock-server","timestamp":"2025-08-18 20:34:18"}
{"level":"info","message":"Database connected successfully","service":"xiaomi-unlock-server","timestamp":"2025-08-18 20:34:18"}
{"level":"info","message":"Xiaomi Unlock Server running on port 3000","service":"xiaomi-unlock-server","timestamp":"2025-08-18 20:34:18"}
{"level":"info","message":"Environment: development","service":"xiaomi-unlock-server","timestamp":"2025-08-18 20:34:18"}
{"level":"info","message":"::1 - - [18/Aug/2025:17:37:44 +0000] \"GET /unlock?limit=50&offset=0 HTTP/1.1\" 404 30 \"-\" \"XiaomiUnlockClient/1.0.0\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 20:37:44"}
{"level":"info","message":"::1 - - [18/Aug/2025:17:38:26 +0000] \"POST /device/register HTTP/1.1\" 404 30 \"-\" \"XiaomiUnlockClient/1.0.0\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 20:38:26"}
{"level":"info","message":"::1 - - [18/Aug/2025:18:58:18 +0000] \"GET /health HTTP/1.1\" 200 69 \"-\" \"Mozilla/5.0 (Windows NT; Windows NT 10.0; tr-TR) WindowsPowerShell/5.1.26100.4768\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 21:58:18"}
{"level":"info","message":"::1 - - [18/Aug/2025:18:58:34 +0000] \"GET /health HTTP/1.1\" 200 69 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 21:58:34"}
{"level":"info","message":"::1 - - [18/Aug/2025:18:58:34 +0000] \"GET /favicon.ico HTTP/1.1\" 404 30 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 21:58:34"}
{"headers":{"clientId":false,"signature":false,"timestamp":false},"ip":"::1","level":"warn","message":"Missing required headers for HMAC validation","path":"/device/register","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:04:53"}
{"error":"Missing required authentication headers","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"xiaomi-unlock-server","stack":"Error: Missing required authentication headers\n    at createError (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\middleware\\errorHandler.js:74:19)\n    at validateHMAC (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\middleware\\hmacValidator.js:26:19)\n    at Layer.handle [as handle_request] (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:82:7)\n    at Layer.handle [as handle_request] (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:328:13)","timestamp":"2025-08-18 22:04:53","url":"/api/device/register","userAgent":"PostmanRuntime/7.44.0"}
{"level":"info","message":"::1 - - [18/Aug/2025:19:04:53 +0000] \"POST /api/device/register HTTP/1.1\" 401 120 \"-\" \"PostmanRuntime/7.44.0\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:04:53"}
{"level":"info","message":"::1 - - [18/Aug/2025:19:06:17 +0000] \"GET /health HTTP/1.1\" 200 69 \"-\" \"PostmanRuntime/7.44.0\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:06:17"}
{"error":"Unexpected token 'H', \"#\" is not valid JSON","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"xiaomi-unlock-server","stack":"SyntaxError: Unexpected token 'H', \"#\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at createStrictSyntaxError (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\body-parser\\lib\\types\\json.js:160:10)\n    at parse (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\body-parser\\lib\\types\\json.js:83:15)\n    at C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\body-parser\\lib\\read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\raw-body\\index.js:231:16)\n    at done (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\raw-body\\index.js:220:7)\n    at IncomingMessage.onEnd (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\raw-body\\index.js:280:7)\n    at IncomingMessage.emit (node:events:515:28)\n    at endReadableNT (node:internal/streams/readable:1409:12)","timestamp":"2025-08-18 22:07:42","url":"/api/device/register","userAgent":"PostmanRuntime/7.44.0"}
{"level":"info","message":"::1 - - [18/Aug/2025:19:07:42 +0000] \"POST /api/device/register HTTP/1.1\" 400 126 \"-\" \"PostmanRuntime/7.44.0\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:07:42"}
{"ip":"::1","level":"warn","message":"Request timestamp outside valid window","path":"/device/register","service":"xiaomi-unlock-server","timeDiff":20976579,"timestamp":"2025-08-18 22:14:29"}
{"error":"Request timestamp outside valid window","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"xiaomi-unlock-server","stack":"Error: Request timestamp outside valid window\n    at createError (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\middleware\\errorHandler.js:74:19)\n    at validateHMAC (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\middleware\\hmacValidator.js:40:19)\n    at Layer.handle [as handle_request] (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:82:7)\n    at Layer.handle [as handle_request] (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:328:13)","timestamp":"2025-08-18 22:14:29","url":"/api/device/register","userAgent":"PostmanRuntime/7.44.0"}
{"level":"info","message":"::1 - - [18/Aug/2025:19:14:29 +0000] \"POST /api/device/register HTTP/1.1\" 401 119 \"-\" \"PostmanRuntime/7.44.0\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:14:29"}
{"error":"Input buffers must have the same byte length","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"xiaomi-unlock-server","stack":"RangeError: Input buffers must have the same byte length\n    at CryptoUtils.verifyHMAC (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\utils\\crypto.js:25:23)\n    at validateHMAC (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\src\\middleware\\hmacValidator.js:50:21)\n    at Layer.handle [as handle_request] (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:82:7)\n    at Layer.handle [as handle_request] (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\yedekler\\OneDrive\\Masaüstü\\AiProjects\\codenthia_works\\xiaomi-project\\server\\node_modules\\express\\lib\\router\\index.js:328:13)","timestamp":"2025-08-18 22:15:08","url":"/api/device/register","userAgent":"PostmanRuntime/7.44.0"}
{"level":"info","message":"::1 - - [18/Aug/2025:19:15:08 +0000] \"POST /api/device/register HTTP/1.1\" 500 102 \"-\" \"PostmanRuntime/7.44.0\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:15:08"}
{"level":"info","message":"::1 - - [18/Aug/2025:19:16:09 +0000] \"GET /start HTTP/1.1\" 404 30 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36\"","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:16:09"}
{"level":"info","message":"Running in development mode without database connection","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:17:29"}
{"level":"info","message":"Database connected successfully","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:17:29"}
{"level":"info","message":"Xiaomi Unlock Server running on port 3000","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:17:29"}
{"level":"info","message":"Environment: development","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:17:29"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"xiaomi-unlock-server","timestamp":"2025-08-18 22:17:49"}
